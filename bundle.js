(()=>{"use strict";class t{#t;constructor(t,i,e,s,n,r,h,a,o){this.#t=[t,i,e,s,n,r,h,a,o]}set(t,i,e,s,n,r,h,a,o){return this.#t[0]=t,this.#t[1]=i,this.#t[2]=e,this.#t[3]=s,this.#t[4]=n,this.#t[5]=r,this.#t[6]=h,this.#t[7]=a,this.#t[8]=o,this}copy(){return new t(...this.#t)}multiply(t){const i=this.#t,e=t.#t,s=[0,0,0,0,0,0,0,0,0];return s[0]=i[0]*e[0]+i[1]*e[3]+i[2]*e[6],s[1]=i[0]*e[1]+i[1]*e[4]+i[2]*e[7],s[2]=i[0]*e[2]+i[1]*e[5]+i[2]*e[8],s[3]=i[3]*e[0]+i[4]*e[3]+i[5]*e[6],s[4]=i[3]*e[1]+i[4]*e[4]+i[5]*e[7],s[5]=i[3]*e[2]+i[4]*e[5]+i[5]*e[8],s[6]=i[6]*e[0]+i[7]*e[3]+i[8]*e[6],s[7]=i[6]*e[1]+i[7]*e[4]+i[8]*e[7],s[8]=i[6]*e[2]+i[7]*e[5]+i[8]*e[8],this.#t=s,this}get data(){return this.#t}static identity(){return new t(1,0,0,0,1,0,0,0,1)}static translation(i,e){return new t(1,0,i,0,1,e,0,0,1)}static rotation(i){const e=Math.cos(i),s=Math.sin(i);return new t(e,-s,0,s,e,0,0,0,1)}static scale(i,e){return new t(i,0,0,0,e,0,0,0,1)}}class i{#i=0;#e=0;#s=0;#n=0;constructor(t,i){this.x=t,this.y=i}set(t){return this.x=t.x,this.y=t.y,this}copy({x:t=this.x,y:e=this.y}={}){return new i(t,e)}add(t){return this.x+=t.x,this.y+=t.y,this}subtract(t){return this.x-=t.x,this.y-=t.y,this}multiply(t){return this.x*=t,this.y*=t,this}divide(t){return this.x/=t,this.y/=t,this}dot(t){return this.x*t.x+this.y*t.y}cross(t){return this.x*t.y-this.y*t.x}transform(t){const{x:i,y:e}=this,s=t.data;return this.x=i*s[0]+e*s[1]+1*s[2],this.y=i*s[3]+e*s[4]+1*s[5],this}translate(i){return this.transform(t.translation(i.x,i.y))}rotate(i){return this.transform(t.rotation(i))}scale(i){return this.transform(t.scale(i.x,i.y))}normalize(){const t=this.magnitude;return 0!==t&&this.divide(t),this}set x(t){this.#i=t,this.#s=Math.atan2(this.#e,t),this.#n=Math.sqrt(t**2+this.#e**2)}get x(){return this.#i}set y(t){this.#e=t,this.#s=Math.atan2(t,this.#i),this.#n=Math.sqrt(this.#i**2+t**2)}get y(){return this.#e}set theta(t){this.#s=t,this.#i=this.#n*Math.cos(t),this.#e=this.#n*Math.sin(t)}get theta(){return this.#s}set magnitude(t){this.#n=t,this.#i=t*Math.cos(this.#s),this.#e=t*Math.sin(this.#s)}get magnitude(){return this.#n}set r(t){this.magnitude=t}get r(){return this.magnitude}static add(t,e){return new i(t.x,t.y).add(e)}static subtract(t,e){return new i(t.x,t.y).subtract(e)}static multiply(t,e){return new i(t.x,t.y).multiply(e)}static divide(t,e){return new i(t.x,t.y).divide(e)}static dot(t,e){return new i(t.x,t.y).dot(e)}static cross(t,e){return new i(t.x,t.y).cross(e)}static transform(t,e){return new i(t.x,t.y).transform(e)}static translate(t,e){return new i(t.x,t.y).translate(e)}static rotate(t,e){return new i(t.x,t.y).rotate(e)}static scale(t,e){return new i(t.x,t.y).scale(e)}static normalize(t){return new i(t.x,t.y).normalize()}static fromPolar(t,e){return new i(e*Math.cos(t),e*Math.sin(t))}}class e{#r;#h;#a;#o=0;constructor(t,i=20){this.#r=t,this.#h=t.copy(),this.#a=i}reset(){this.#h.set(this.#r),this.#o=0}jump(){this.#o<0||(this.#o=-8)}update(){this.#o=Math.min(this.#o+.5,e.#l),this.#h.add({x:0,y:this.#o})}get position(){return this.#h}get size(){return this.#a}get left(){return this.#h.x-this.#a/2}get right(){return this.#h.x+this.#a/2}get top(){return this.#h.y-this.#a/2}get bottom(){return this.#h.y+this.#a/2}static#l=40}class s{#h;constructor(t,e){e=Math.min(s.#c-s.#u/2-s.#x,Math.max(s.#d+s.#u/2+s.#x,e)),this.#h=new i(t,e)}update(){this.#h.subtract({x:2,y:0})}nextIfThereIsSpaceTo(t){const i=this.#y();return i.x<t+s.#p/2?new s(i.x,i.y):null}#y(){const t=this.#h.x+s.#p+s.#g,i=100*Math.random()+100,e=this.#h.y-i<s.#d+s.#u/2+s.#x,n=this.#h.y+i>s.#c-s.#u/2-s.#x;let r=this.#h.y;return e?r+=i:n?r-=i:r+=i*Math.sign(Math.random()-.5),{x:t,y:r}}get left(){return this.#h.x-s.#p/2}get right(){return this.#h.x+s.#p/2}get bottomOfTopPart(){return this.#h.y-s.#u/2}get topOfBottomPart(){return this.#h.y+s.#u/2}get position(){return this.#h}static#u=100;static#p=50;static#g=300;static#d=0;static#c=0;static#x=20;static set TOP_BOUNDARY(t){s.#d=t}static set BOTTOM_BOUNDARY(t){s.#c=t}static get SIZE(){return s.#p}}const n=new class{#f;#m;#P;#O=new i(0,0);#v="#fff";#b="#fff";#A=1;#w=[];#T=0;#D="start";#S="alphabetic";#B="10px sans-serif";#k=1;#I=1;constructor(t,i,e){this.#f=t,this.#m=document.getElementById(t),this.#P=this.#m.getContext("2d"),this.fillStyle="#fff",this.strokeStyle="#fff",this.lineWidth=1,this.lineDash=[],this.lineDashOffset=0,this.textAlign="start",this.textBaseline="alphabetic",this.font="10px sans-serif",this.globalAlpha=1,this.resize(i,e)}resize(t,e){return this.#m.width=t,this.#m.height=e,this.#I=t/e,this.#O=new i(+(t/2).toFixed(4),+(e/2).toFixed(4)),this}drawImage(t,i,e,s){return this.context.drawImage(t,i.x,i.y,e,s),this}rotateAndDrawImage(t,i,e,s,n){return this.save().translate(i).rotate(-n).drawImage(t,{x:-e/2,y:-s/2},e,s).restore(),this}circle(t,i){return this.context.arc(t.x,t.y,i,0,2*Math.PI),this}rect(t,i,e){return this.context.rect(t.x,t.y,i,e),this}line(t,i){return this.context.moveTo(t.x,t.y),this.context.lineTo(i.x,i.y),this}moveTo(t){return this.context.moveTo(t.x,t.y),this}lineTo(t){return this.context.lineTo(t.x,t.y),this}text({text:t,at:i,fillStyle:e=this.#v,strokeStyle:s=this.#b,size:n=16}){return this.beginPath(),this.textAlign="center",this.textBaseline="middle",this.fillStyle=e,this.strokeStyle=s,this.font=`${n}px Arial`,this.context.fillText(t,i.x,i.y),this.context.strokeText(t,i.x,i.y),this}beginPath(){return this.context.beginPath(),this}closePath(){return this.context.closePath(),this}stroke({color:t=this.#b,width:i=this.#A,dash:e=this.#w}={}){return this.strokeStyle=t,this.lineWidth=i,this.lineDash=e,this.context.stroke(),this}fill(t=this.#v){return this.fillStyle=t,this.context.fill(),this}background(t="#000"){return this.#m.style.backgroundColor=t,this}clear(){return this.context.clearRect(0,0,this.width,this.height),this}translate(t){return this.context.translate(t.x,t.y),this}rotate(t){return this.context.rotate(t),this}save(){return this.context.save(),this}restore(){return this.context.restore(),this}requestPointerLock(){return this.#m.requestPointerLock(),this}set fillStyle(t){this.#v=t,this.context.fillStyle=t}set strokeStyle(t){this.#b=t,this.context.strokeStyle=t}set lineWidth(t){this.#A=t,this.context.lineWidth=t}set lineDash(t){this.#w=t,this.context.setLineDash(Array.from(t))}set lineDashOffset(t){this.#T=t,this.context.lineDashOffset=t}set textAlign(t){this.#D=t,this.context.textAlign=t}set textBaseline(t){this.#S=t,this.context.textBaseline=t}set font(t){this.#B=t,this.context.font=t}set globalAlpha(t){this.#k=t,this.context.globalAlpha=t}get id(){return this.#f}get canvas(){return this.#m}get context(){if(!this.#P)throw new Error("CanvasRenderingContext2D is null");return this.#P}get center(){return this.#O}get width(){return this.#m.width}get height(){return this.#m.height}get aspectRatio(){return this.#I}get fillStyle(){return this.#v}get strokeStyle(){return this.#b}get lineWidth(){return this.#A}get lineDash(){return this.#w}get lineDashOffset(){return this.#T}get textAlign(){return this.#D}get textBaseline(){return this.#S}get font(){return this.#B}get globalAlpha(){return this.#k}}("canvas",innerWidth,innerHeight);n.background("skyblue");const r=new class{#m;#M;#E=[];#N=!1;constructor(t){s.TOP_BOUNDARY=0,s.BOTTOM_BOUNDARY=t.height,this.#m=t,this.#M=new e(t.center.copy({x:100})),this.#E=this.#R(),window.addEventListener("keydown",(t=>{" "!==t.key&&"ArrowUp"!==t.key||this.#M.jump()})),window.addEventListener("click",(()=>this.#M.jump()))}#R(){const t=[];let i=new s(this.#m.center.x,this.#m.center.y);for(t.push(i);;){const e=i.nextIfThereIsSpaceTo(this.#m.width);if(null===e)break;t.push(e),i=e}return t}reset(){this.#M.reset(),this.#N=!1,this.#E=this.#R()}update(){this.#M.update();for(const t of this.#E)t.update();this.#E[0].right<0&&this.#E.shift();const t=this.#E.at(-1);if(t){const i=t.nextIfThereIsSpaceTo(this.#m.width);i&&this.#E.push(i)}(this.#M.bottom>=this.#m.height||this.#M.top<=0)&&(this.#N=!0),this.#_()&&(this.#N=!0)}#_(){const t=this.#z();return!!t&&this.#M.right>=t.left&&this.#M.left<=t.right&&(this.#M.top<=t.bottomOfTopPart||this.#M.bottom>=t.topOfBottomPart)}#z(){return[this.#E[0],this.#E[1]].find((t=>t.right>this.#M.position.x))}render(){this.#m.beginPath().circle(this.bird.position,this.bird.size/2).closePath().fill("#ff0").stroke({color:"black",width:2});for(const t of this.#E)this.#m.beginPath().rect({x:t.left,y:0},s.SIZE,t.bottomOfTopPart).rect({x:t.left,y:t.topOfBottomPart},s.SIZE,this.#m.height-t.topOfBottomPart).closePath().fill("#0f0").stroke({color:"black",width:2})}get bird(){return this.#M}get isOver(){return this.#N}}(n);!function t(){r.update(),n.clear(),r.render(),r.isOver&&r.reset(),requestAnimationFrame(t)}(),addEventListener("resize",(()=>{n.resize(innerWidth,innerHeight),r.render()}))})();